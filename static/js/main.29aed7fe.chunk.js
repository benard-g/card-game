(this["webpackJsonp@packages/frontend"]=this["webpackJsonp@packages/frontend"]||[]).push([[0],{103:function(e,n,t){},116:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorCode=void 0,function(e){e.USER_ALREADY_IN_LOBBY="USER_ALREADY_IN_LOBBY"}(n.ErrorCode||(n.ErrorCode={}))},123:function(e,n,t){"use strict";t.r(n);var r=t(4),c=(t(102),t(103),t(2)),i=t.n(c),a=t(83),o=t.n(a),u=t(67),b=t(57),s=t.n(b),l=t(25),d=t(68);var j="https://benard-card-game-api.herokuapp.com",f="production",O=Object(c.createContext)(void 0);function h(){return(h=Object(d.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(j,"/api/auth/authenticate"),e.abrupt("return",fetch(n,{method:"POST",credentials:"include"}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var n=e.children,t=Object(c.useState)(!1),i=Object(l.a)(t,2),a=i[0],o=i[1],u=Object(c.useState)(!0),b=Object(l.a)(u,2),s=b[0],d=b[1],j=Object(c.useState)(void 0),f=Object(l.a)(j,2),v=f[0],x=f[1];return Object(c.useEffect)((function(){a||function(){return h.apply(this,arguments)}().then((function(e){e.ok?o(!0):x(new Error("Auth failed"))})).catch((function(e){x(e)})).finally((function(){d(!1)}))}),[a,s]),Object(r.jsx)(O.Provider,{value:{loading:s,error:v},children:n})};var x=t(37),p={classic:{colors:{background:"lightblue"},spacings:{abs4:"4px",abs8:"8px",abs12:"12px",abs16:"16px",abs24:"24px",abs32:"32px",abs48:"48px"}}},g=Object(c.createContext)(void 0),y=function(e){var n=e.defaultTheme,t=e.children,i=Object(c.useState)(n),a=Object(l.a)(i,2),o=a[0],u=a[1],b=p[o];return Object(r.jsx)(g.Provider,{value:[{name:o,theme:b},u],children:Object(r.jsx)(x.a,{theme:b,children:t})})};var w=t(42),m=t(96),E=t(87),L=t(88),_=Object(c.createContext)(void 0),P=function(e){var n=e.children,t=e.fallbackLanguage,i=e.languages,a=Object(c.useState)(!0),o=Object(l.a)(a,2),u=o[0],b=o[1],s=Object(c.useState)(!1),d=Object(l.a)(s,2),j=d[0],f=d[1],O=Object(c.useState)(void 0),h=Object(l.a)(O,2),v=h[0],x=h[1];return Object(c.useEffect)((function(){j||m.a.use(L.a).use(E.a).use(w.e).init({fallbackLng:t,whitelist:i,react:{wait:!0},debug:!1,returnEmptyString:!1,returnObjects:!0}).then((function(){f(!0)})).catch((function(e){x(e)})).finally((function(){b(!1)}))}),[u,j,t,i]),Object(r.jsx)(_.Provider,{value:{loading:u,error:v,languages:i},children:n})};var C=t(11),S=new C.ApolloClient({uri:"".concat(j,"/api/graphql"),cache:new C.InMemoryCache,credentials:"include",connectToDevTools:"development"===f}),k=function(e){var n=e.children;return Object(r.jsx)(C.ApolloProvider,{client:S,children:n})},A=t(33);function q(){var e=function(){var e=Object(c.useContext)(O);if(!e)throw new Error("Missing wrapping ApiAuthProvider");return{loading:e.loading,error:e.error}}(),n=e.loading,t=e.error,r=function(){var e=Object(c.useContext)(_);if(!e)throw new Error("Missing wrapping I18nextProvider");return{loading:e.loading,error:e.error,languages:e.languages}}(),i=r.loading,a=r.error;return{loading:n||i,error:t||a}}var B=t(65),M=t(98),Y=t(10),I=t(36),R=t(125),T=t(69),D=t(66),U=function(){var e=Object(R.a)().t,n=Object(D.c)(),t=n.data,c=n.loading,i=n.error,a=null===t||void 0===t?void 0:t.viewer.id,o=null===t||void 0===t?void 0:t.viewer.lobby;return c?Object(r.jsx)(A.a,{}):i||!t?Object(r.jsx)(T.a,{error:i}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:e("pages.Home.title")}),Object(r.jsxs)("p",{children:["uid: ",a]}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),o?Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:["You are in lobby: ",o.id]}),Object(r.jsx)(I.b,{to:"/lobbies/".concat(o.id),children:"Go to lobby"})]}):Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"You are not part of a lobby"}),Object(r.jsx)(I.b,{to:"lobbies/create",children:"Create lobby"})]})]})},N=Object(c.lazy)((function(){return t.e(3).then(t.bind(null,126))})),Q=function(e){var n=e.children,t=Object(M.a)(e,["children"]);return Object(r.jsx)(Y.b,Object(B.a)(Object(B.a)({},t),{},{children:Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)(A.a,{}),children:n})}))},H=function(){return Object(r.jsx)(I.a,{children:Object(r.jsxs)(Y.d,{children:[Object(r.jsx)(Y.b,{exact:!0,path:"/",children:Object(r.jsx)(U,{})}),Object(r.jsx)(Q,{path:"/lobbies",children:Object(r.jsx)(N,{})}),Object(r.jsx)(Y.b,{path:"*",children:Object(r.jsx)(Y.a,{to:"/"})})]})})},J=t(30);function V(){var e=Object(J.a)(["\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  background-color: ",";\n"]);return V=function(){return e},e}var z=x.b.div(V(),(function(e){return e.theme.colors.background})),G=function(){var e=q(),n=e.loading,t=e.error;return n?Object(r.jsx)(z,{children:Object(r.jsx)(A.a,{})}):t?Object(r.jsx)(z,{children:Object(r.jsx)("p",{children:"An error occurred while loading the app."})}):Object(r.jsx)(z,{children:Object(r.jsx)(H,{})})},F=function(){return Object(r.jsx)(u.b,{children:Object(r.jsx)(k,{children:Object(r.jsx)(y,{defaultTheme:"classic",children:Object(r.jsx)(P,{languages:["en","fr"],fallbackLanguage:"en",children:Object(r.jsx)(v,{children:Object(r.jsx)(G,{})})})})})})};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(F,{})}),document.getElementById("root"))},33:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t(4),c=(t(2),function(){return Object(r.jsx)("p",{children:"Loading..."})})},66:function(e,n,t){"use strict";t.d(n,"c",(function(){return l})),t.d(n,"a",(function(){return j})),t.d(n,"b",(function(){return O})),t.d(n,"d",(function(){return v})),t.d(n,"e",(function(){return p}));var r=t(30),c=t(11);function i(){var e=Object(r.a)(["\n    mutation ViewLobbyPage_LeaveLobby {\n  leaveLobby {\n    id\n    lobby {\n      id\n    }\n  }\n}\n    "]);return i=function(){return e},e}function a(){var e=Object(r.a)(["\n    query ViewLobbyPage {\n  viewer {\n    id\n    lobby {\n      id\n    }\n  }\n}\n    "]);return a=function(){return e},e}function o(){var e=Object(r.a)(["\n    mutation CreateLobbyPage_CreateLobby {\n  createLobby {\n    id\n    lobby {\n      id\n    }\n  }\n}\n    "]);return o=function(){return e},e}function u(){var e=Object(r.a)(["\n    query CreateLobbyPage {\n  viewer {\n    id\n    lobby {\n      id\n    }\n  }\n}\n    "]);return u=function(){return e},e}function b(){var e=Object(r.a)(["\n    query HomePage {\n  viewer {\n    id\n    lobby {\n      id\n    }\n  }\n}\n    "]);return b=function(){return e},e}var s=Object(c.gql)(b());function l(e){return c.useQuery(s,e)}var d=Object(c.gql)(u());function j(e){return c.useQuery(d,e)}var f=Object(c.gql)(o());function O(e){return c.useMutation(f,e)}var h=Object(c.gql)(a());function v(e){return c.useQuery(h,e)}var x=Object(c.gql)(i());function p(e){return c.useMutation(x,e)}},69:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t(4),c=(t(2),t(97)),i=t(94);var a=function(e){var n=e.error;if(n instanceof c.a){var t=function(e){var n;switch(null===(n=e.extensions)||void 0===n?void 0:n.code){case i.ErrorCode.USER_ALREADY_IN_LOBBY:return"User already in lobby";default:return}}(n);if(t)return Object(r.jsxs)("p",{children:["Error: ",t]})}return Object(r.jsx)("p",{children:"Error: The operation failed."})}},94:function(e,n,t){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),c=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||r(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),c(t(116),n)}},[[123,1,2]]]);
//# sourceMappingURL=main.29aed7fe.chunk.js.map