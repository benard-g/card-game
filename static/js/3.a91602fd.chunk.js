(this["webpackJsonp@packages/frontend"]=this["webpackJsonp@packages/frontend"]||[]).push([[3],{125:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return O}));var c=r(4),n=(r(2),r(11)),a=r(22),b=r.n(a),i=r(30),j=r(31),s=r(69),o=r(36),l=r(47);var u=function(){var e,t=Object(n.g)(),r=function(){var e=Object(n.h)();return new URLSearchParams(e.search)}().get("c"),a=Object(l.e)({fetchPolicy:"cache-and-network",variables:{lobbyId:r||""}}),u=a.data,d=a.loading,O=a.error,x=Object(l.c)(),h=Object(j.a)(x,2),p=h[0],f=h[1],v=f.loading,y=f.error,w=Object(l.d)(),m=Object(j.a)(w,2),k=m[0],g=m[1],L=g.loading,D=g.error,I=v||L,C=y||D;if(d)return Object(c.jsx)(o.a,{});if(O||!u)return Object(c.jsx)(s.a,{error:O});var P=u.lobbyPreview,J=u.viewer;if(!P)return Object(c.jsx)(n.a,{to:"/"});var N=!!J.lobby;if((null===(e=J.lobby)||void 0===e?void 0:e.id)===P.id)return Object(c.jsx)(n.a,{to:"/lobby"});var T=function(){var e=Object(i.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!N){e.next=4;break}return e.next=4,k();case 4:return e.next=6,p({variables:{input:{lobbyId:P.id,userName:"Bob"}}});case 6:t.push("/lobby"),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"Lobby"}),Object(c.jsx)("br",{}),Object(c.jsxs)("p",{children:["Lobby ID: ",P.id]}),Object(c.jsxs)("p",{children:["Nb members: ",P.nbMembers]}),Object(c.jsx)("br",{}),Object(c.jsx)("p",{children:"TODO: choose your avatar"}),Object(c.jsx)("p",{children:"TODO: choose your name"}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{disabled:I,onClick:T,children:"Join Lobby"}),C?Object(c.jsx)("p",{children:C.message}):null]})},d=function(){var e=Object(l.f)(),t=e.data,r=e.loading,a=e.error,u=Object(l.d)(),d=Object(j.a)(u,2),O=d[0],x=d[1].loading;if(r)return Object(c.jsx)(o.a,{});if(a||!t)return Object(c.jsx)(s.a,{error:a});var h=t.viewer.lobby;if(!h)return Object(c.jsx)(n.a,{to:"/"});var p=function(){var e=Object(i.a)(b.a.mark((function e(){var t,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!!window.location.hash,r="".concat(window.location.origin).concat(t?"/#":""),c="".concat(r,"/lobby/join?c=").concat(h.id),e.next=5,navigator.clipboard.writeText(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"Lobby Page"}),Object(c.jsx)("br",{}),Object(c.jsxs)("p",{children:["ID: ",h.id]}),Object(c.jsx)("button",{onClick:p,children:"Copy invite link"}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("ul",{children:h.members.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsxs)("p",{children:["ID: ",e.id]}),Object(c.jsxs)("p",{children:["Name: ",e.name]}),Object(c.jsxs)("p",{children:["Role: ",e.role]}),Object(c.jsx)("br",{})]},e.id)}))}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{disabled:x,onClick:f,children:"Leave lobby"})]})},O=function(){var e=Object(n.i)().path;return Object(c.jsxs)(n.d,{children:[Object(c.jsx)(n.b,{exact:!0,path:"".concat(e),children:Object(c.jsx)(d,{})}),Object(c.jsx)(n.b,{path:"".concat(e,"/join"),children:Object(c.jsx)(u,{})}),Object(c.jsx)(n.b,{path:"*",children:Object(c.jsx)(n.a,{to:"/"})})]})}}}]);
//# sourceMappingURL=3.a91602fd.chunk.js.map